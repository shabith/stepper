/*! stepper - v1.0.0 - 2015-03-01
* https://github.com/shabith/stepper
* Copyright (c) Shabith Ishan [shabith] 2015; Licensed MIT */
angular.module("ui.stepper",["ui.stepnumber","ui.stepdate"]),angular.module("ui.stepnumber",[]).directive("stepNumber",["$timeout",function(a){return{restrict:"E",require:"ngModel",scope:{},template:'            <ng-form name="stepNumberForm" novalidate >                <div class="step-number fakeFocus"                    tabindex="{{$id}}"                    ng-class="{\'fake-focus\': fakeFocus}"                    ng-keyup="keyControl($event)"><button						ng-disabled="incDisable"                        class="btn btn-primary btn-stepper"						ng-click="inc()">						<i class="glyphicon glyphicon-plus "></i></button><input type="text"                    ng-style="setWidth()"                    name="value"                    ng-keyup="keyControl($event)"                    ng-model="value"                    ng-focus="selectAll($event)"                    ng-blur="validate()" ><button						ng-disabled="decDisable"                        class="btn btn-primary btn-stepper "						ng-click="dec()"><i class="glyphicon glyphicon-minus "></i></button></div>            </ng-form>',link:function(b,c,d,e){var f=parseInt(d.max,10),g=parseInt(d.min,10),h=isNaN(parseInt(d.digits,10))?1:parseInt(d.digits,10),i="",j=b.stepNumberForm.value,k=function(a){var b=a.toString(),c=b.length,d="0000000000";return h>c?d.substring(0,h-c)+b:b};b.$watch(e,function(){e.$viewValue=k(e.$viewValue);var a=parseInt(e.$viewValue,10);a=a>=f?f:a,a=g>=a?g:a,b.incDisable=a>=f?!0:!1,b.decDisable=g>=a?!0:!1,b.value=a.toString(),i=b.value}),b.fakeFocus=!1,b.setWidth=function(){var a=8+8*h;return{width:a.toString()+"px"}},j.$parsers.unshift(function(a){var b=a.replace(/[^0-9]+/g,"");return j.$viewValue=b,j.$render(),b}),b.keyControl=function(d){var e;if("DIV"===d.target.tagName)switch(d.keyCode){case 27:e=c.find("div"),b.value=i,d.preventDefault(),a(function(){e[0].blur()},0);break;case 13:e=c.find("div"),b.validate(),d.preventDefault(),a(function(){e[0].blur()},0);break;case 187:b.inc();break;case 189:b.dec();break;case 39:b.inc();break;case 37:b.dec();break;default:d.preventDefault()}else switch(d.keyCode){case 27:e=c.find("input"),b.value=i,d.preventDefault(),a(function(){e[0].blur()},0);break;case 13:e=c.find("input"),b.validate(),d.preventDefault(),a(function(){e[0].blur()},0);break;default:d.preventDefault()}},b.inc=function(){var a=parseInt(b.value,10);isNaN(g)?a++:(f>a&&(a++,b.decDisable=!1),a===f&&(b.incDisable=!0)),b.value=k(a),e.$setViewValue(b.value),e.$render()},b.dec=function(){var a=parseInt(b.value,10);isNaN(g)?a--:(a>g&&(a--,b.incDisable=!1),a===g&&(b.decDisable=!0)),b.value=k(a),e.$setViewValue(b.value),e.$render()},b.validate=function(){b.fakeFocus=!1;var a=parseInt(b.value,10);isNaN(a)?b.value=i:(g>a&&(b.value=g.toString(),b.decDisable=!0,b.incDisable=!1),a>f&&(b.value=f.toString(),b.incDisable=!0,b.decDisable=!1),i=b.value),e.$setViewValue(b.value),e.$render()},b.selectAll=function(c){b.fakeFocus=!0,a(function(){c.target.select()},0)}}}}]),angular.module("ui.stepdate",["ui.stepnumber"]).directive("stepDate",[function(){return{restrict:"E",scope:{},require:"ngModel",template:'            <ng-form name="stepDateForm" class="form-inline" novalidate>                        <div class="step-date">Day:                            <step-number                                name="day"                                ng-model="stepDate.day"                                ng-change="refresh()"                                max="31"                                min="1"                                digits="2">                            </step-number>                        </div>                        <div class="step-date">Month:                            <step-number                                name="month"                                ng-model="stepDate.month"                                ng-change="refresh()"                                max="12"                                min="1"                                digits="2">                            </step-number>                        </div>                        <div class="step-date">Year:                            <step-number                                name="year"                                ng-model="stepDate.year"                                ng-change="refresh()"                                max="3000"                                min="2000"                                digits="4">                            </step-number>                        </div>            </ng-form>',link:function(a,b,c,d){a.stepDate={},a.$watch(d.$viewValue,function(){a.stepDate.day=d.$viewValue.split("-")[2],a.stepDate.month=d.$viewValue.split("-")[1],a.stepDate.year=d.$viewValue.split("-")[0],a.stepDateForm.day.$setViewValue(a.stepDate.day),a.stepDateForm.month.$setViewValue(a.stepDate.month),a.stepDateForm.year.$setViewValue(a.stepDate.year)}),a.refresh=function(){d.$setViewValue(a.stepDate.year+"-"+a.stepDate.month+"-"+a.stepDate.day),d.$render()}}}}]);